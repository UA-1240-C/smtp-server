<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SMTP Server: SMTP Server</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SMTP Server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SMTP Server </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> An SMTP (Simple Mail Transfer Protocol) server receives, sends, and relays email messages between mail clients and servers.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Class diagram</h1>
<p>The class diagram is too large to be included as a screenshot, so you can view it via this <a href="https://app.diagrams.net/#G18TAVlUWYbuGFc7bfx1EHllH8uL5EcOHS#%7B%22pageId%22%3A%229f46799a-70d6-7492-0946-bef42562c5a5%22%7D">link</a>. This diagram covers all parts of our system, including the database, client, and server.</p>
<p>A simplified version of the class diagram is presented in the image below. It maintains all the logical connections of the full diagram but does not include the class fields.</p>
<p><img src="https://github.com/user-attachments/assets/5b6301ed-13fd-48b1-bc42-3961c6ca55b0" alt="image" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md2"></a>
Requirments</h1>
<div class="fragment"><div class="line">Gnu/Linux OS (Tested on Arch 2024.08.01; Ubuntu 24.04)</div>
<div class="line">CMake 3.16+</div>
<div class="line">C++20</div>
<div class="line">OpenSSL</div>
<div class="line">Boost</div>
<div class="line">PQXX</div>
<div class="line">GUnit</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md3"></a>
Setup Guide</h1>
<h2><a class="anchor" id="autotoc_md4"></a>
For Ubuntu and Debian</h2>
<p>To install the required libraries on Ubuntu or Debian, you can use the <code>apt</code> package manager. Run the following commands:</p>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install cmake g++ libssl-dev libboost-all-dev libpqxx-dev libgtest-dev libgmock-dev</div>
</div><!-- fragment --><ul>
<li>CMake 3.16+: cmake package (may need to add a PPA or manually download if the version is lower).</li>
<li>C++20: Ensure you have the latest g++ package to support C++20 features.</li>
<li>OpenSSL: libssl-dev</li>
<li>Boost: libboost-all-dev</li>
<li>pqxx: libpqxx-dev</li>
<li>Google Test: libgtest-dev</li>
<li>Google Mock: libgmock-dev</li>
</ul>
<h2><a class="anchor" id="autotoc_md5"></a>
For Arch Linux and Manjaro</h2>
<p>To install the required libraries on Arch Linux or Manjaro, you can use the <code>pacman</code> package manager or the <code>yay</code> AUR helper. Run the following commands:</p>
<ul>
<li>Using pacman: <div class="fragment"><div class="line">sudo pacman -Syu cmake gcc openssl boost libpqxx gtest</div>
</div><!-- fragment --></li>
<li>Using yay (for AUR packages): <div class="fragment"><div class="line">yay -S cmake gcc openssl boost libpqxx gtest gmock</div>
</div><!-- fragment --></li>
<li>CMake 3.16+: cmake package</li>
<li>C++20: Ensure you have the latest gcc package to support C++20 features.</li>
<li>OpenSSL: openssl package</li>
<li>Boost: boost package</li>
<li>pqxx: libpqxx package</li>
<li>Google Test: gtest package (includes Google Mock)</li>
</ul>
<p>In the <code>scripts</code> directory, there is a file named <code>start.sh.</code> This script builds your project and launches a Linux daemon for the server.</p>
<h1><a class="anchor" id="autotoc_md6"></a>
Modules</h1>
<p>In the <code>include</code> directory, you will find individual modules, which are C++ classes with separate header files. These modules can be linked as libraries or interfaces.</p>
<p>The available modules include:</p><ul>
<li>CommandHandler</li>
<li>DataBase</li>
<li><a class="el" href="classLogger.html" title="Logger class for managing and writing log messages.">Logger</a></li>
<li>MailMessage</li>
<li>Parser</li>
<li>Server</li>
<li>SignalHandler</li>
<li>SocketWrapper</li>
<li>Utils</li>
</ul>
<h2><a class="anchor" id="autotoc_md7"></a>
CommandHandler</h2>
<p>The CommandHandler module intercepts and processes all SMTP commands on the server, such as HELO, MAIL FROM, RCPT TO, DATA, QUIT, NOOP, RSET, HELP, STARTTLS, AUTH PLAIN, and REGISTER.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
DataBase</h2>
<p>The DataBase module handles database operations. More details are available at <a href="https://github.com/UA-1240-C/DataBase">this link</a>.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Logger</h2>
<p>The <a class="el" href="classLogger.html" title="Logger class for managing and writing log messages.">Logger</a> module manages message logging at various levels. More details are available at <a href="https://github.com/UA-1240-C/smtp-server/tree/SCRUM-160/Logger-Documentation-and-Integration">this link</a>.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
MailMessage</h2>
<p>The MailMessage module simplifies the creation of email messages, allowing you to set the subject, body, sender, and recipient.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Parser</h2>
<p>The Parser module reads the configuration file located in the root directory of the project. It sets various necessary variables for the server, logger, and other components. More information can be found <a href="https://github.com/UA-1240-C/smtp-server/tree/SCRUM-38-JSON-Parser-implementation">here</a>.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Server</h2>
<p>The Server module is responsible for starting the server, connecting new clients, and reading and sending messages to clients.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
SignalHandler</h2>
<p>The SignalHandler module is used to handle console commands like ^C, ensuring they are processed correctly and the application is shut down properly.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
SocketWrapper</h2>
<p>The SocketWrapper module manages socket operations, implementing methods for initializing both TCP and SSL sockets, as well as timers for timeouts and methods for safely closing the socket.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
Utils</h2>
<p>The Utils directory includes a <code>ThreadPool</code>, which is essential for the server's operation. When a new client connects, the thread pool creates a new task and delegates its execution to a separate thread. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
